<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Certificados Generados</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>
<body>
    <div class="container mt-5">
        <h2>Certificados Generados</h2>
        
        <!-- Alerta Flash -->
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                <div class="alert alert-success">
                    <ul>
                        {% for category, message in messages %}
                            <li>{{ message }}</li>
                        {% endfor %}
                    </ul>
                </div>
            {% endif %}
        {% endwith %}
        
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th>Nombre</th>
                    <th>RUT</th>
                    <th>Dirección</th>
                    <th>Comuna</th>
                    <th>Fecha de Emisión</th>
                    <th>Documentos Adjuntos</th>
                </tr>
            </thead>
            <tbody>
                {% for certificado in certificados %}
                    <tr>
                        <td>{{ certificado.nombre }}</td>
                        <td>{{ certificado.rut }}</td>
                        <td>{{ certificado.direccion }}</td>
                        <td>{{ certificado.comuna }}</td>
                        <td>{{ certificado.fecha_emision }}</td>
                        <td>
                            {% if certificado.documentos %}
                                <a href="{{ url_for('ver_documento', certificado_id=certificado.id) }}" class="btn btn-info">Ver Documento</a>
                            {% else %}
                                <p>No hay documentos</p>
                            {% endif %}
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>



    <footer class="bg-dark text-white py-4 mt-5">
        <div class="container">
            <div class="row">
              <div class="col-md-6">
                <h5>Powered by:</h5>
                <ul class="list-unstyled">
                  <li><strong>Nombre:</strong> Nicolás Zamorano Vásquez</li>
                  <li><strong>Escuela:</strong> Escuela de Informática y Telecomunicaciones</li>
                  <li><strong>Institución:</strong> DUOC UC</li>
                </ul>
              </div>
              <div class="col-md-6">
                <h5>Contacto</h5>
                <p>Email: <a href="mailto:ni.zamoranov@duocuc.cl" class="text-white">ni.zamoranov@duocuc.cl</a></p>
                <p>Teléfono: +56 9 562 712 75</p>
              </div>
            </div>
        </div>
        <div class="text-center py-3 mt-3" style="border-top: 1px solid #777;">
          <small>&copy; 2024 Todos los derechos reservados</small>
        </div>
    </footer>
    

    <script>
        // Configura el valor predeterminado de la fecha como el día de hoy
        document.addEventListener("DOMContentLoaded", () => {
            const fechaInput = document.getElementById("fecha_emision");
            const hoy = new Date().toISOString().split('T')[0]; // Obtiene la fecha en formato 'YYYY-MM-DD'
            fechaInput.value = hoy; // Establece el valor predeterminado
        });

       
    </script>
</body>
</html>
